{"version":3,"sources":["src/swivel.js"],"names":[],"mappings":"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","file":"src/swivel.js","sourcesContent":["class Swivel {\n  constructor(images, options) {\n    let opts = options || {};\n    this.settings = {\n      containerId: opts.containerId || \"swivel\",\n      startIndex:  opts.startIndex || Math.round(images.length / 2) - 1,\n      height:      opts.height || null,\n      width:       opts.width || null,\n    };\n    this.images = this._loadImages(images);\n    this.container = document.getElementById(this.settings.containerId);\n  }\n\n  _loadImages(images) {\n    let htmlImages = [];\n    let imgObj;\n    // Load startIndex image first\n    imgObj = new Image();\n    imgObj.src = images[this.settings.startIndex];\n    imgObj.onload = (e) => {\n      this.settings.height = this.settings.height || e.target.height;\n      this.settings.width = this.settings.width || e.target.width;\n    };\n\n    for (let i = 0; i < images.length; i++) {\n      imgObj = new Image();\n      imgObj.src = images[i];\n      htmlImages.push(imgObj);\n    }\n\n    return htmlImages;\n  }\n\n  _setContainerBackgroundImg(src) {\n    if (src === this.containerSrc) { return; }\n    this.containerSrc = src;\n    this.container.style.background = 'url(' + src + ') no-repeat center';\n  }\n\n  _addEventHandlers() {\n    var self = this;\n    this.container.onmousemove = function (e) {\n      let imgIdx = 0,\n          regionWidth = self.settings.width / self.images.length,\n          regionStartX = regionWidth;\n      while (true) {\n        if (e.offsetX <= regionStartX) { break; }\n        regionStartX += regionWidth;\n        imgIdx++;\n      }\n      self._setContainerBackgroundImg(self.images[imgIdx].src);\n    };\n  }\n\n  run() {\n    this._addEventHandlers();\n\n    //TODO: wait for start image to load\n    this.container.style.height = this.settings.height + 'px';\n    this.container.style.width = this.settings.width + 'px';\n\n    this._setContainerBackgroundImg(this.images[this.settings.startIndex].src);\n  }\n}\n\nwindow.Swivel = Swivel;\n"]}